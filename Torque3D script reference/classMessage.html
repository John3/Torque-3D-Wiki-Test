<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Torque 3D - Script Manual: Message Class Reference</title>
<link href="torquedoc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%" class="header">
<tr>
<td style="background-image: url( 'images/t3d-documentation-header.png' ); height: 100px;">
   <!-- hack... makes the HTML Help compiler include the image into the project -->
   <img src="images/t3d-documentation-header.png" style="width: 0; height: 0; borders: 0;">
</td>
</tr>
<tr><td class="headermenu">
	<center>
	<a class="qindex" href="index.html">Main</a> &nbsp; 
	<a class="qindex" href="annotated.html">Class List</a> &nbsp; 
	<a class="qindex" href="namespaces.html">Namespace List</a>	&nbsp; 
	<a class="qindex" href="https://github.com/LuisAntonRebollo/Torque-3D-Wiki-Test/wiki">Wiki</a>
	</center>
</td></tr>
</table>
<br>
<!-- END HEADER -->
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>Message Class Reference<br/>
<small>
[<a class="el" href="group__Messaging.html">Messaging</a>]</small>
</h1><!-- doxytag: class="Message" --><!-- doxytag: inherits="SimObject" -->
<p>Base class for messages.  
<a href="#_details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Message:</div>
<div class="dynsection">
<div class="center"><img src="classMessage__inherit__graph.png" border="0" usemap="#Message_inherit__map" alt="Inheritance graph"/></div>
<map name="Message_inherit__map" id="Message_inherit__map">
<area shape="rect" href="classSimObject.html" title="Base class for almost all objects involved in the simulation." alt="" coords="5,5,88,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classMessage-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessage.html#ae25d56635dbafa5ae3c4b6039601ecc7">addReference</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Increment the reference count for this message.  <a href="#ae25d56635dbafa5ae3c4b6039601ecc7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessage.html#a7f2e39017c38426a91ce1a8f7431d2cf">freeReference</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrement the reference count for this message.  <a href="#a7f2e39017c38426a91ce1a8f7431d2cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessage.html#ae65b9b5703241317bb3d92c2e9986c60">getType</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get message type (script class name or C++ class name if no script defined class).  <a href="#ae65b9b5703241317bb3d92c2e9986c60"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Callbacks</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp927620a4c3403f9e2746e959e968dc01"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessage.html#abb134e9ffc0036b1c80958c037c7b713">onAdd</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Script callback when a message is first created and registered.  <a href="#abb134e9ffc0036b1c80958c037c7b713"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMessage.html#a2bf013efbb5377d674ac4f18c5e54790">onRemove</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Script callback when a message is deleted.  <a href="#a2bf013efbb5377d674ac4f18c5e54790"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Base class for messages. </p>
<p><a class="el" href="classMessage.html" title="Base class for messages.">Message</a> is the base class for C++ defined messages, and may also be used in script for script defined messages if no C++ subclass is appropriate.</p>
<p>Messages are reference counted and will be automatically deleted when their reference count reaches zero. When you dispatch a message, a reference will be added before the dispatch and freed after the dispatch. This allows for temporary messages with no additional code. If you want to keep the message around, for example to dispatch it to multiple queues, call <a class="el" href="classMessage.html#ae25d56635dbafa5ae3c4b6039601ecc7" title="Increment the reference count for this message.">addReference()</a> before dispatching it and <a class="el" href="classMessage.html#a7f2e39017c38426a91ce1a8f7431d2cf" title="Decrement the reference count for this message.">freeReference()</a> when you are done with it. Never delete a <a class="el" href="classMessage.html" title="Base class for messages.">Message</a> object directly unless <a class="el" href="classMessage.html#ae25d56635dbafa5ae3c4b6039601ecc7" title="Increment the reference count for this message.">addReference()</a> has not been called or the message has not been dispatched.</p>
<p><a class="el" href="classMessage.html" title="Base class for messages.">Message</a> IDs are pooled similarly to datablocks, with the exception that IDs are reused. If you keep a message for longer than a single dispatch, then you should ensure that you clear any script variables that refer to it after the last <a class="el" href="classMessage.html#a7f2e39017c38426a91ce1a8f7431d2cf" title="Decrement the reference count for this message.">freeReference()</a>. If you don't, then it is probable that the object ID will become valid again in the future and could cause hard to track down bugs.</p>
<p>Messages have a unique type to simplify message handling code. For object messages, the type is defined as either the script defined class name or the C++ class name if no script class was defined. The message type may be obtained through the <a class="el" href="classMessage.html#ae65b9b5703241317bb3d92c2e9986c60" title="Get message type (script class name or C++ class name if no script defined class)...">getType()</a> method.</p>
<p>By convention, any data for the message is held in script accessible fields. Messages that need to be handled in C++ as well as script provide the relevant data through persistent fields in a subclass of <a class="el" href="classMessage.html" title="Base class for messages.">Message</a> to provide best performance on the C++ side. Script defined messages usually their through dynamic fields, and may be accessed in C++ using the SimObject::getDataField() method. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae25d56635dbafa5ae3c4b6039601ecc7"></a><!-- doxytag: member="Message::addReference" ref="ae25d56635dbafa5ae3c4b6039601ecc7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Message::addReference </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increment the reference count for this message. </p>

</div>
</div>
<a class="anchor" id="a7f2e39017c38426a91ce1a8f7431d2cf"></a><!-- doxytag: member="Message::freeReference" ref="a7f2e39017c38426a91ce1a8f7431d2cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Message::freeReference </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrement the reference count for this message. </p>

</div>
</div>
<a class="anchor" id="ae65b9b5703241317bb3d92c2e9986c60"></a><!-- doxytag: member="Message::getType" ref="ae65b9b5703241317bb3d92c2e9986c60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string Message::getType </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get message type (script class name or C++ class name if no script defined class). </p>

</div>
</div>
<a class="anchor" id="abb134e9ffc0036b1c80958c037c7b713"></a><!-- doxytag: member="Message::onAdd" ref="abb134e9ffc0036b1c80958c037c7b713" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Message::onAdd </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Script callback when a message is first created and registered. </p>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">function <a class="code" href="classMessage.html#abb134e9ffc0036b1c80958c037c7b713" title="Script callback when a message is first created and registered.">Message::onAdd</a>(%<span class="keyword">this</span>)
{
   <span class="comment">// Perform on add code here</span>
}
</pre></div> </dd></dl>

</div>
</div>
<a class="anchor" id="a2bf013efbb5377d674ac4f18c5e54790"></a><!-- doxytag: member="Message::onRemove" ref="a2bf013efbb5377d674ac4f18c5e54790" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Message::onRemove </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Script callback when a message is deleted. </p>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">function <a class="code" href="classMessage.html#a2bf013efbb5377d674ac4f18c5e54790" title="Script callback when a message is deleted.">Message::onRemove</a>(%<span class="keyword">this</span>)
{
   <span class="comment">// Perform on remove code here</span>
}
</pre></div> </dd></dl>

</div>
</div>
</div>

<!-- START FOOTER -->
<br>
<br>
<center>
	<div style="color: #777777;">
	Copyright &copy; <a style="color: #777777;" target="_blank" href="http://www.garagegames.com">GarageGames, LLC</a>. All Rights Reserved.
	</div>
</center>
</body>
</html>
