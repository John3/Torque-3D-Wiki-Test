<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Torque 3D - Script Manual: BanList Class Reference</title>
<link href="torquedoc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%" class="header">
<tr>
<td style="background-image: url( 'images/t3d-documentation-header.png' ); height: 100px;">
   <!-- hack... makes the HTML Help compiler include the image into the project -->
   <img src="images/t3d-documentation-header.png" style="width: 0; height: 0; borders: 0;">
</td>
</tr>
<tr><td class="headermenu">
	<center>
	<a class="qindex" href="index.html">Main</a> &nbsp; 
	<a class="qindex" href="annotated.html">Class List</a> &nbsp; 
	<a class="qindex" href="namespaces.html">Namespace List</a>	&nbsp; 
	<a class="qindex" href="https://github.com/LuisAntonRebollo/Torque-3D-Wiki-Test/wiki">Wiki</a>
	</center>
</td></tr>
</table>
<br>
<!-- END HEADER -->
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>BanList Class Reference</h1><!-- doxytag: class="BanList" -->
<p>Used for kicking and banning players from a server. There is only a single instance of <a class="el" href="classBanList.html" title="Used for kicking and banning players from a server. There is only a single instance...">BanList</a>. It is very important to note that you do not ever create this object in script like you would other game play objects. You simply reference it via namespace.  
<a href="#_details">More...</a></p>

<p><a href="classBanList-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBanList.html#ac4832c0eb7484f9ab2e5f5152d0a5480">add</a> (int uniqueId, string transportAddress, int banLength)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ban a user for banLength seconds.  <a href="#ac4832c0eb7484f9ab2e5f5152d0a5480"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBanList.html#a5dff7e381068a010e08271b767639a94">addAbsolute</a> (int uniqueId, string transportAddress, int banTime)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ban a user until a given time.  <a href="#a5dff7e381068a010e08271b767639a94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBanList.html#abaf645848287041d6f54dfcc9dc664de">export</a> (string filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump the banlist to a file.  <a href="#abaf645848287041d6f54dfcc9dc664de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBanList.html#a3e9d4f93fff8ff25edc4bcdeaa6fc9f2">isBanned</a> (int uniqueId, string transportAddress)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is someone banned?  <a href="#a3e9d4f93fff8ff25edc4bcdeaa6fc9f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBanList.html#a92aae243d637a0ab998aa0e762643f06">removeBan</a> (int uniqueId, string transportAddress)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unban someone.  <a href="#a92aae243d637a0ab998aa0e762643f06"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Used for kicking and banning players from a server. There is only a single instance of <a class="el" href="classBanList.html" title="Used for kicking and banning players from a server. There is only a single instance...">BanList</a>. It is very important to note that you do not ever create this object in script like you would other game play objects. You simply reference it via namespace. </p>
<p>For this to be used effectively, make sure you are hooking up other functions to <a class="el" href="classBanList.html" title="Used for kicking and banning players from a server. There is only a single instance...">BanList</a>. For example, functions like <a class="el" href="classGameConnection.html#a06dba0d222ee71dd70868dcf83ab11f1" title="Called on the client when the connection to the server has been rejected.">GameConnection::onConnectRequestRejected</a>( this, msg ) and function GameConnection::onConnectRequest are excellent places to make use of the <a class="el" href="classBanList.html" title="Used for kicking and banning players from a server. There is only a single instance...">BanList</a>. Other systems can be used in conjunction for strict control over a server</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Game.html#ga5b68d993cffb69deab86404ad7171e42" title="Add a string to the bad word filter.">addBadWord</a> </dd>
<dd>
<a class="el" href="group__Game.html#ga4e275eaaa4d7cfdcc1c99bffca67467c" title="Checks to see if text is a bad word.">containsBadWords</a> </dd></dl>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac4832c0eb7484f9ab2e5f5152d0a5480"></a><!-- doxytag: member="BanList::add" ref="ac4832c0eb7484f9ab2e5f5152d0a5480" args="(int uniqueId, string transportAddress, int banLength)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void BanList::add </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uniqueId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>transportAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>banLength</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ban a user for banLength seconds. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uniqueId</em>&nbsp;</td><td>Unique ID of the player. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transportAddress</em>&nbsp;</td><td>Address from which the player connected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>banLength</em>&nbsp;</td><td>Time period over which to ban the player.</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">// Kick someone off the server</span>
<span class="comment">// %client - This is the connection to the person we are kicking</span>
function kick(%client)
{
      <span class="comment">// Let the server know what happened</span>
      messageAll( <span class="stringliteral">&#39;MsgAdminForce&#39;</span>, <span class="stringliteral">&#39;\c2The Admin has kicked %1.&#39;</span>, %client.playerName);

      <span class="comment">// If it is not an AI Player, execute the ban.</span>
      <span class="keywordflow">if</span> (!%client.isAIControlled())
         <a class="code" href="classBanList.html#ac4832c0eb7484f9ab2e5f5152d0a5480" title="Ban a user for banLength seconds.">BanList::add</a>(%client.guid, %client.getAddress(), $pref::Server::KickBanTime);

      <span class="comment">// Let the player know they messed up</span>
      %client.delete(<span class="stringliteral">&quot;You have been kicked from this server&quot;</span>);
}
</pre></div> </dd></dl>

</div>
</div>
<a class="anchor" id="a5dff7e381068a010e08271b767639a94"></a><!-- doxytag: member="BanList::addAbsolute" ref="a5dff7e381068a010e08271b767639a94" args="(int uniqueId, string transportAddress, int banTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void BanList::addAbsolute </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uniqueId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>transportAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>banTime</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ban a user until a given time. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uniqueId</em>&nbsp;</td><td>Unique ID of the player. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transportAddress</em>&nbsp;</td><td>Address from which the player connected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>banTime</em>&nbsp;</td><td>Time at which they will be allowed back in.</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">// Kick someone off the server</span>
<span class="comment">// %client - This is the connection to the person we are kicking</span>
function kick(%client)
{
      <span class="comment">// Let the server know what happened</span>
      messageAll( <span class="stringliteral">&#39;MsgAdminForce&#39;</span>, <span class="stringliteral">&#39;\c2The Admin has kicked %1.&#39;</span>, %client.playerName);

      <span class="comment">// If it is not an AI Player, execute the ban.</span>
      <span class="keywordflow">if</span> (!%client.isAIControlled())
         <a class="code" href="classBanList.html#a5dff7e381068a010e08271b767639a94" title="Ban a user until a given time.">BanList::addAbsolute</a>(%client.guid, %client.getAddress(), $pref::Server::KickBanTime);

      <span class="comment">// Let the player know they messed up</span>
      %client.delete(<span class="stringliteral">&quot;You have been kicked from this server&quot;</span>);
}
</pre></div> </dd></dl>

</div>
</div>
<a class="anchor" id="abaf645848287041d6f54dfcc9dc664de"></a><!-- doxytag: member="BanList::export" ref="abaf645848287041d6f54dfcc9dc664de" args="(string filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void BanList::export </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump the banlist to a file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td><a class="el" href="classPath.html" title="A spline along which various objects can move along. The spline object acts like...">Path</a> of the file to write the list to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment">BanList::Export(<span class="stringliteral">&quot;./server/banlist.cs&quot;</span>);
</pre></div> </dd></dl>

</div>
</div>
<a class="anchor" id="a3e9d4f93fff8ff25edc4bcdeaa6fc9f2"></a><!-- doxytag: member="BanList::isBanned" ref="a3e9d4f93fff8ff25edc4bcdeaa6fc9f2" args="(int uniqueId, string transportAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool BanList::isBanned </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uniqueId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>transportAddress</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is someone banned? </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uniqueId</em>&nbsp;</td><td>Unique ID of the player. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transportAddress</em>&nbsp;</td><td>Address from which the player connected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">//-----------------------------------------------------------------------------</span>
<span class="comment">// This script function is called before a client connection</span>
<span class="comment">// is accepted.  Returning  will accept the connection,</span>
<span class="comment">// anything else will be sent back as an error to the client.</span>
<span class="comment">// All the connect args are passed also to onConnectRequest</span>
function GameConnection::onConnectRequest( %client, %netAddress, %name )
{
     <span class="comment">// Find out who is trying to connect</span>
     <a class="code" href="group__Logging.html#gadda60a90d6b71f2d19f027847c0cb6f9" title="Logs a message to the console.">echo</a>(<span class="stringliteral">&quot;Connect request from: &quot;</span> @ %netAddress);

     <span class="comment">// Are they allowed in?</span>
     <span class="keywordflow">if</span>(<a class="code" href="classBanList.html#a3e9d4f93fff8ff25edc4bcdeaa6fc9f2" title="Is someone banned?">BanList::isBanned</a>(%client.guid, %netAddress))
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;CR_YOUAREBANNED&quot;</span>;

     <span class="comment">// Is there room for an unbanned player?</span>
     <span class="keywordflow">if</span>($Server::PlayerCount &gt;= $pref::Server::MaxPlayers)
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;CR_SERVERFULL&quot;</span>;
     return ;
}
</pre></div> </dd></dl>

</div>
</div>
<a class="anchor" id="a92aae243d637a0ab998aa0e762643f06"></a><!-- doxytag: member="BanList::removeBan" ref="a92aae243d637a0ab998aa0e762643f06" args="(int uniqueId, string transportAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void BanList::removeBan </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>uniqueId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>transportAddress</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unban someone. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uniqueId</em>&nbsp;</td><td>Unique ID of the player. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transportAddress</em>&nbsp;</td><td>Address from which the player connected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><a class="code" href="classBanList.html#a92aae243d637a0ab998aa0e762643f06" title="Unban someone.">BanList::removeBan</a>(%userID, %ipAddress);
</pre></div> </dd></dl>

</div>
</div>
</div>

<!-- START FOOTER -->
<br>
<br>
<center>
	<div style="color: #777777;">
	Copyright &copy; <a style="color: #777777;" target="_blank" href="http://www.garagegames.com">GarageGames, LLC</a>. All Rights Reserved.
	</div>
</center>
</body>
</html>
